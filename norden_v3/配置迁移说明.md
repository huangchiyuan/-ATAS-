# 配置参数集中化迁移说明

## 📋 概述

所有配置参数已从各个模块集中到 `config.py` 文件中，便于统一管理和调优。

---

## ✅ 已完成的工作

### 1. 创建集中配置文件

**文件**：`norden_v3/config.py`

**包含的配置类**：
- `MakerConfig` - 策略主引擎配置
- `KalmanConfig` - 卡尔曼滤波配置
- `RidgeConfig` - 岭回归配置
- `OBIConfig` - OBI 计算配置
- `IcebergConfig` - 冰山检测配置
- `BTCRegimeConfig` - BTC 风险监控配置
- `PresetConfigs` - 预设配置模板

### 2. 更新模块导入

所有模块已更新为从 `config.py` 导入配置类：

- ✅ `kalman_model.py` → 从 `config` 导入 `KalmanConfig`
- ✅ `ridge_model.py` → 从 `config` 导入 `RidgeConfig`
- ✅ `obi_calculator.py` → 从 `config` 导入 `OBIConfig`
- ✅ `iceberg_detector.py` → 从 `config` 导入 `IcebergConfig`
- ✅ `btc_regime.py` → 从 `config` 导入 `BTCRegimeConfig`
- ✅ `maker_engine.py` → 从 `config` 导入 `MakerConfig` 和所有配置类

### 3. 移除重复定义

- ✅ 从各个模块中移除了配置类定义
- ✅ 保持原有功能不变，只改变导入方式

### 4. 更新模块导出

- ✅ `__init__.py` 已更新，统一导出所有配置类
- ✅ 向后兼容，现有代码无需修改

---

## 📝 使用方式

### 方式 1：使用默认配置（无需修改代码）

```python
from norden_v3 import NordenMakerV3

# 所有配置使用默认值
engine = NordenMakerV3()
```

**现有代码无需修改，自动使用集中配置！**

### 方式 2：自定义配置

```python
from norden_v3 import NordenMakerV3, MakerConfig, KalmanConfig

# 自定义策略配置
maker_cfg = MakerConfig(base_spread_threshold=1.0)

# 自定义 Kalman 配置
kalman_cfg = KalmanConfig(r_obs=150.0)

engine = NordenMakerV3(
    maker_cfg=maker_cfg,
    kalman_cfg=kalman_cfg,
)
```

### 方式 3：使用预设配置

```python
from norden_v3 import NordenMakerV3, PresetConfigs

# 使用保守配置
engine = NordenMakerV3(maker_cfg=PresetConfigs.conservative())

# 使用激进配置
engine = NordenMakerV3(maker_cfg=PresetConfigs.aggressive())
```

---

## 📖 详细参数说明

所有参数的详细说明和调优建议都在 `config.py` 文件中：

- ✅ 每个参数都有详细的文档字符串
- ✅ 包含参数作用说明
- ✅ 包含调优建议和推荐值
- ✅ 包含计算公式（如适用）

**查看详细说明**：

```python
from norden_v3.config import MakerConfig
import inspect

# 查看 MakerConfig 的文档
print(inspect.getdoc(MakerConfig))

# 查看特定参数的说明
print(MakerConfig.base_spread_threshold.__doc__)
```

---

## 🔍 参数查找

### 快速查找参数位置

所有配置参数都在 `norden_v3/config.py` 文件中，使用搜索功能即可找到：

1. 打开 `norden_v3/config.py`
2. 按 `Ctrl+F` 搜索参数名
3. 查看详细注释说明

### 配置类索引

| 配置类 | 行数范围（大约） | 主要参数 |
|--------|----------------|----------|
| `MakerConfig` | 35-200 | Spread阈值、OBI过滤、队列、止盈止损 |
| `KalmanConfig` | 202-280 | 初始协方差、过程噪声、观测噪声 |
| `RidgeConfig` | 282-340 | 遗忘因子、岭惩罚系数 |
| `OBIConfig` | 342-400 | 计算深度、权重衰减 |
| `IcebergConfig` | 402-480 | 最小隐藏量、衰减时间、检查范围 |
| `BTCRegimeConfig` | 482-540 | 时间窗口、报警阈值、采样频率 |

---

## 📚 相关文档

- **详细参数说明**：`配置参数说明.md`
- **使用示例**：`配置使用示例.py`
- **配置文件**：`config.py`（含详细注释）

---

## ⚠️ 向后兼容

**所有现有代码无需修改！**

- 配置类的位置改变了，但接口和默认值完全一致
- 通过 `__init__.py` 统一导出，导入方式不变
- 如果需要自定义配置，现在更简单了

---

## 🎯 优势

### 集中管理
- ✅ 所有参数在一个文件中，便于查找和修改
- ✅ 统一的文档格式和注释风格

### 易于调优
- ✅ 详细的调优建议和推荐值
- ✅ 预设配置模板，快速切换策略风格

### 易于维护
- ✅ 修改参数只需改一个文件
- ✅ 避免参数分散导致的遗漏

---

**配置文件位置**：`norden_v3/config.py`  
**最后更新**：2025-01-19

