# 仪表盘可视化图表说明

## 📊 图表名称：信号监控 (Spread vs Threshold)

这个图表是策略驾驶舱的**核心可视化**，用于监控策略的交易信号强度。

---

## 🎯 图表显示的内容

### 核心概念：Spread（价差）

**Spread = 理论价格 - 实际价格**

- **理论价格（Fair Price）**：由卡尔曼滤波器根据 NQ、YM 和 ES 的相关性计算出的"合理价格"
- **实际价格（Actual Price）**：ES 期货的当前市场价格
- **Spread（价差）**：两者之间的差异

**意义**：
- 如果 Spread > 0：说明 ES 被**低估**了，理论应该做多
- 如果 Spread < 0：说明 ES 被**高估**了，理论应该做空
- Spread 的绝对值越大，套利机会越大

---

## 📈 图表元素详解

### 1. **黄色曲线**（Spread 值）

- **含义**：实时计算的 Spread 值，以 **tick** 为单位
  - 1 tick = 0.25 点（ES 的最小价格变动单位）
  - 例如：Spread = 0.75 tick = 0.1875 点

- **观察要点**：
  - 曲线在 0 轴上方 → 理论价高于实际价（潜在做多机会）
  - 曲线在 0 轴下方 → 理论价低于实际价（潜在做空机会）
  - 曲线波动幅度 → 反映市场的套利机会大小

---

### 2. **绿色虚线**（上阈值线）

- **位置**：Y = +0.75 tick（默认值，可调整）
- **含义**：**做多触发线**
- **规则**：
  - 当黄色曲线**突破**绿色虚线（向上）→ 触发**做多信号**
  - 表示：理论价显著高于实际价，套利空间足够大

- **调优**：
  - 阈值越小（如 0.5 tick）→ 更容易触发做多，信号更多但可能假信号更多
  - 阈值越大（如 1.5 tick）→ 更不容易触发，信号更少但更可靠

---

### 3. **红色虚线**（下阈值线）

- **位置**：Y = -0.75 tick（默认值，可调整）
- **含义**：**做空触发线**
- **规则**：
  - 当黄色曲线**跌破**红色虚线（向下）→ 触发**做空信号**
  - 表示：理论价显著低于实际价，套利空间足够大

- **调优**：
  - 阈值越小（绝对值，如 -0.5 tick）→ 更容易触发做空
  - 阈值越大（绝对值，如 -1.5 tick）→ 更不容易触发做空

---

### 4. **灰色虚线**（0 轴参考线）

- **位置**：Y = 0
- **含义**：理论价 = 实际价，**无套利机会**
- **作用**：作为视觉参考，帮助判断 Spread 的正负

---

## 🔍 如何阅读这个图表

### 场景 1：看信号触发

**观察黄色曲线与阈值线的交叉**：

```
黄色曲线 > 绿色虚线（+0.75）  →  🟢 做多信号触发
黄色曲线 < 红色虚线（-0.75）  →  🔴 做空信号触发
黄色曲线在两条虚线之间        →  ⏳ 等待信号
```

**在你的图表中**：
- 在 Time = 100-200 之间，曲线多次突破绿色虚线 → 多次做多机会
- 在 Time = 700-750 之间，曲线跌破红色虚线 → 做空机会
- 在 Time = 800-1000 之间，曲线多次跌破红色虚线 → 多次做空机会

---

### 场景 2：看信号强度

**观察曲线距离阈值线的距离**：

- **曲线刚好触碰阈值线** → 信号较弱，可能不够可靠
- **曲线大幅超越阈值线**（如达到 2-3 tick）→ 信号很强，套利空间大
- **曲线频繁穿越阈值线** → 市场波动大，可能需要调整阈值

**在你的图表中**：
- 在 Time = 400 和 600 附近，曲线达到 +2 tick → 很强的做多信号
- 在 Time = 850 附近，曲线达到 -1 tick → 中等强度的做空信号

---

### 场景 3：看市场状态

**观察曲线的整体走势**：

- **曲线大部分时间在 0 轴上方** → 市场整体偏向做多
- **曲线大部分时间在 0 轴下方** → 市场整体偏向做空
- **曲线频繁在 0 轴上下波动** → 市场震荡，机会多但需要快速反应
- **曲线长时间贴近 0 轴** → 市场均衡，套利机会少

**在你的图表中**：
- Time = 350-700 之间，曲线主要在 0 轴上方 → 这段时间做多机会更多
- Time = 800-1000 之间，曲线主要在 0 轴下方 → 这段时间做空机会更多

---

## ⚙️ 实际应用

### 1. 参数调优

**如果曲线波动太小，从未触及阈值线**：
- → 降低阈值（从 0.75 改为 0.5）
- → 或增大 Kalman R，让模型产生更大的 Spread

**如果曲线乱跳，噪音太大**：
- → 增大 Kalman R，让模型更稳定
- → 或提高阈值，过滤掉小波动

---

### 2. 交易决策

**当看到黄色曲线突破绿色虚线时**：
1. 查看顶部的大字提示：是否显示 "🟢 BUY LIMIT"
2. 查看过滤器状态灯：OBI、Iceberg、BTC Risk 是否都通过
3. 如果所有条件满足 → 可以执行做多交易

**当看到黄色曲线跌破红色虚线时**：
1. 查看顶部的大字提示：是否显示 "🔴 SELL LIMIT"
2. 查看过滤器状态灯：是否都通过
3. 如果所有条件满足 → 可以执行做空交易

---

## 📊 图表数据含义总结

| 元素 | 颜色 | 位置/值 | 含义 |
|------|------|---------|------|
| Spread 曲线 | 黄色 | 动态变化 | 当前套利机会大小 |
| 做多阈值 | 绿色虚线 | +0.75 tick | 做多信号触发线 |
| 做空阈值 | 红色虚线 | -0.75 tick | 做空信号触发线 |
| 0 轴参考 | 灰色虚线 | 0 | 无套利机会基准线 |

---

## 💡 关键理解

这个图表的核心价值在于：

1. **不看价格，看价差**：不再纠结 ES 是 6000 还是 7000，而是看理论价和实际价的差异
2. **量化信号强度**：通过 Spread 的数值，量化判断交易机会的大小
3. **实时监控**：看到信号从出现到消失的完整过程
4. **参数验证**：通过观察曲线行为，验证参数设置是否合理

---

## 🔗 与其他组件的关系

- **顶部指令区**：当曲线突破阈值时，会显示 "BUY LIMIT" 或 "SELL LIMIT"
- **过滤器状态灯**：即使曲线突破阈值，也可能被 OBI、Iceberg、BTC Risk 过滤器拦截
- **参数调整面板**：可以通过调整 Spread 阈值，实时看到阈值线移动

---

**总结**：这个图表是策略的"眼睛"，让你直观地看到市场中的套利机会，而不仅仅是价格涨跌。

---

**最后更新**：2025-01-19

